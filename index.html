<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Light on Vim</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.0" /><meta name="book-title" content="Light on Vim" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  if (agent.indexOf('android') != -1 && agent.indexOf('chrom') != -1 ) {
      file = 'fonts-nolocal.css';
  }
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script></head><body class="single offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs inactive"><a class="single-crumb" href="#vim" accesskey="c"><span class="single-contents-icon"></span>Light on Vim</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#vim" accesskey="c"><span class="single-contents-icon"></span>Show Contents: Light on Vim</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#cha.vim.intro"><span class="number">1 </span><span class="name">Making Vim Comfortable</span></a></li><li class="inactive"><a href="#cha.vim.fugitive"><span class="number">2 </span><span class="name">Fugitive: Wrapping around Git</span></a></li><li class="inactive"><a href="#cha.vim.xml"><span class="number">3 </span><span class="name">Editing XML/DocBook Files</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class=""><div class="documentation"><div xml:lang="en" class="book" id="vim" lang="en"><div class="titlepage"><div><div><h1 class="title">Light on Vim</h1></div><div><span class="imprint-label">Author: </span><span class="firstname ">Tomáš</span> <span class="surname ">Bažant</span></div><div class="date"><span class="imprint-label">Publication Date: </span>04/15/2016</div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.vim.intro"><span class="number">1 </span><span class="name">Making Vim Comfortable</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#id1823"><span class="number">1.1 </span><span class="name">Useful Vim Settings</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.vim.fugitive"><span class="number">2 </span><span class="name">Fugitive: Wrapping around Git</span></a></span></dt><dt><span class="chapter"><a href="#cha.vim.xml"><span class="number">3 </span><span class="name">Editing XML/DocBook Files</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#id1825"><span class="number">3.1 </span><span class="name">Moving Around the Tags</span></a></span></dt><dt><span class="sect1"><a href="#id1831"><span class="number">3.2 </span><span class="name">xml.vim Plugin</span></a></span></dt><dt><span class="sect1"><a href="#id1832"><span class="number">3.3 </span><span class="name">DTD Support</span></a></span></dt><dt><span class="sect1"><a href="#id1833"><span class="number">3.4 </span><span class="name">Auto-completing XML Entities</span></a></span></dt><dt><span class="sect1"><a href="#id1837"><span class="number">3.5 </span><span class="name">On-the-fly Spell-Checking</span></a></span></dt><dt><span class="sect1"><a href="#id1838"><span class="number">3.6 </span><span class="name">DocBook Snippet Macros</span></a></span></dt></dl></dd></dl></div>
 
 <div class="chapter " id="cha.vim.intro"><div class="titlepage"><div><div><h1 class="title"><span class="number">1 </span><span class="name">Making Vim Comfortable</span> <a title="Permalink" class="permalink" href="#cha.vim.intro">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#id1823"><span class="number">1.1 </span><span class="name">Useful Vim Settings</span></a></span></dt></dl></div></div>
 
 <p></p>
 <div class="sect1 " id="id1823"><div class="titlepage"><div><div><h2 class="title" id="id1823"><span class="number">1.1 </span><span class="name">Useful Vim Settings</span> <a title="Permalink" class="permalink" href="#id1823">#</a></h2></div></div></div>
  

  <p>
   Vim stores its settings in <code class="filename">~/.vimrc</code>. Here are the ones that I generally
   find useful. Note that lines starting with <code class="literal">"</code> are
   comments.
  </p>

  <div id="id1839" class="admonition tip"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6>
   <p>
    After you make changes to <code class="filename">~/.vimrc</code>, you can apply them without restarting
    the Vim session with <code class="command">:source ~/.vimrc</code>
   </p>
  </div>

<div class="verbatim-wrap"><pre class="screen">" break compatibility with the ancient vi
set nocompatible
" set autorecognition of file types
filetype on
filetype plugin on
filetype indent on
" syntax highlighting, of course
syntax on
" smart context sensitive indenting
set smartindent
" show the info status bar at the bottom
set ruler
" show line numbers
set number</pre></div>

  <p>
   If you use tabs to edit several files at once, it is handy to map the
   following shortcuts to switch between them.
  </p>

<div class="verbatim-wrap"><pre class="screen">" switch the tabs with SHIFT + &lt; or &gt;
map &lt;S-Right&gt; :tabnext&lt;CR&gt;
map &lt;S-Left&gt; :tabprevious&lt;CR&gt;</pre></div>
 </div>
</div>
 <div class="chapter " id="cha.vim.fugitive"><div class="titlepage"><div><div><h1 class="title"><span class="number">2 </span><span class="name">Fugitive: Wrapping around Git</span> <a title="Permalink" class="permalink" href="#cha.vim.fugitive">#</a></h1></div></div></div><div class="line"></div>
 
 <p></p>
</div>
 <div class="chapter " id="cha.vim.xml"><div class="titlepage"><div><div><h1 class="title"><span class="number">3 </span><span class="name">Editing XML/DocBook Files</span> <a title="Permalink" class="permalink" href="#cha.vim.xml">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#id1825"><span class="number">3.1 </span><span class="name">Moving Around the Tags</span></a></span></dt><dt><span class="sect1"><a href="#id1831"><span class="number">3.2 </span><span class="name">xml.vim Plugin</span></a></span></dt><dt><span class="sect1"><a href="#id1832"><span class="number">3.3 </span><span class="name">DTD Support</span></a></span></dt><dt><span class="sect1"><a href="#id1833"><span class="number">3.4 </span><span class="name">Auto-completing XML Entities</span></a></span></dt><dt><span class="sect1"><a href="#id1837"><span class="number">3.5 </span><span class="name">On-the-fly Spell-Checking</span></a></span></dt><dt><span class="sect1"><a href="#id1838"><span class="number">3.6 </span><span class="name">DocBook Snippet Macros</span></a></span></dt></dl></div></div>
 
 <p>
  First, turn on default capabilities for XML and DocBook file types, such
  as indenting and tag completion, by inserting the following line into your
  <code class="filename">~/.vimrc</code>:
 </p>
<div class="verbatim-wrap"><pre class="screen">autocmd FileType xml,docbk set omnifunc=xmlcomplete#CompleteTags</pre></div>
 <div class="sect1 " id="id1825"><div class="titlepage"><div><div><h2 class="title" id="id1825"><span class="number">3.1 </span><span class="name">Moving Around the Tags</span> <a title="Permalink" class="permalink" href="#id1825">#</a></h2></div></div></div>
  

  <p>
   When editing an XML document, it is often useful to move and manipulate
   the text in the context of the XML tags. For example to erase the text
   the cursor is currently at, including the surrounding tags. Or to copy
   the inner text from the tag under cursor.
  </p>

  <div class="sect2 " id="id1824"><div class="titlepage"><div><div><h3 class="title" id="id1824"><span class="number">3.1.1 </span><span class="name">Text Objects</span> <a title="Permalink" class="permalink" href="#id1824">#</a></h3></div></div></div>
   
   <p>
    Vim knows about <span class="emphasis"><em>text objects</em></span>. A text object is a
    part of text, such as word, sentence, block (block of text between
    brackets), or paragraph. You define them by pressing
    <code class="literal">w</code>, <code class="literal">s</code>, <code class="literal">b</code>, or
    <code class="literal">p</code>. Vim knows about one text object related
    specifically to markup languages - a tag. A tag corresponds to a pair
    HTML/XML element.
   </p>
   <p>
    Vim distinguishes between the inner part of a tag, and the whole tag
    including the surrounding markup. Vim can also select a text enclosed
    in quotes, or jump the cursor between left or right sharp brackets. Get
    inspired by the following few useful examples:
   </p>
   <div class="informaltable">
    <table class="informaltable" border="1"><colgroup><col width="1in" /><col width="1.5in" /><col /></colgroup><thead><tr><th>command</th><th>how to remember</th><th>description</th></tr></thead><tbody><tr><td><code class="command">it</code>
       </td><td>inner tag</td><td>text placed inside XML element</td></tr><tr><td><code class="command">at</code>
       </td><td>all tag</td><td>same as <code class="command">it</code> + the pair of surrounding tags</td></tr><tr><td><code class="command">2it</code>
       </td><td>2 x inner tag</td><td>select the inner text of the parent element (including the current tag)</td></tr><tr><td><code class="command">2at</code>
       </td><td>2 x all tag</td><td>select the whole parent element (including the current and the parent tags)</td></tr><tr><td><code class="command">f&gt;</code>
       </td><td>find &gt;</td><td>selects the text to the end of the closing tag, including '&gt;'</td></tr><tr><td><code class="command">t&lt;</code>
       </td><td>find to &gt;</td><td>selects the text to the end of the closing tag, without '&lt;'</td></tr><tr><td><code class="command">F&lt;</code>
       </td><td>find &lt; backward</td><td>selects the text from the beginning of the tag, including '&lt;'</td></tr><tr><td><code class="command">T&lt;</code>
       </td><td>find to &lt; backward</td><td>selects the text from the beginning of the tag, without '&lt;'</td></tr><tr><td><code class="command">a"</code>
       </td><td>a string</td><td>selects the text including the surrounding quotes, such as XML attribute</td></tr><tr><td><code class="command">i"</code>
       </td><td>a string</td><td>selects the text without the surrounding quotes, such as text of an XML attribute</td></tr></tbody></table>
   </div>
  </div>
 </div>
 <div class="sect1 " id="id1831"><div class="titlepage"><div><div><h2 class="title" id="id1831"><span class="number">3.2 </span><span class="name">xml.vim Plugin</span> <a title="Permalink" class="permalink" href="#id1831">#</a></h2></div></div></div>
  

  <p>
   The <code class="literal">xml.vim</code> plugin adds extended functionality to
   editing XML files, such as auto-closing tags, matching the beginning or
   end of a tag, or folding tags or comments.
  </p>

  <div class="sect2 " id="id1826"><div class="titlepage"><div><div><h3 class="title" id="id1826"><span class="number">3.2.1 </span><span class="name">Installation</span> <a title="Permalink" class="permalink" href="#id1826">#</a></h3></div></div></div>
   
   <p>
    To install the <code class="literal">xml.vim</code> plugin, follow these steps:
   </p>
   <div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
     <p>
      Download latest version of the <code class="literal">xml.vim</code> plugin from
      <a class="ulink" href="https://github.com/vim-scripts/xml.vim" target="_blank">https://github.com/vim-scripts/xml.vim</a>.
     </p>
    </li><li class="step ">
     <p>
      Unzip the file to the <code class="filename">~/.vim/ftplugin/</code> directory.
     </p>
    </li><li class="step ">
     <p>
      Because Vim uses other default XML features we want to use, edit
      <code class="filename">~/.vim/ftplugin/xml.vim</code> and comment
      (<code class="literal">"</code>) the line
     </p>
<div class="verbatim-wrap"><pre class="screen">b:did_ftplugin = 1</pre></div>
    </li><li class="step ">
     <p>
      Restart Vim. Now you can access the plugin's help by entering
     </p>
<div class="verbatim-wrap"><pre class="screen">:help xml-plugin</pre></div>
    </li></ol></div></div>
  </div>

  <div class="sect2 " id="id1830"><div class="titlepage"><div><div><h3 class="title" id="id1830"><span class="number">3.2.2 </span><span class="name">Added Value</span> <a title="Permalink" class="permalink" href="#id1830">#</a></h3></div></div></div>
   
   <p>
    The following tables show goodies of <code class="literal">xml.vim</code>. Notice
    that '|' stands for the current cursor position.
   </p>
   <div class="sect3 " id="id1827"><div class="titlepage"><div><div><h4 class="title" id="id1827"><span class="number">3.2.2.1 </span><span class="name">Enhancements for the Insert Mode</span> <a title="Permalink" class="permalink" href="#id1827">#</a></h4></div></div></div>
    
    <div class="informaltable">
     <table class="informaltable" border="1"><colgroup><col width=".8in" /><col width=".8in" /><col width="1.2in" /><col /></colgroup><thead><tr><th>mapping</th><th>when</th><th>result</th><th>description</th></tr></thead><tbody><tr><td>
<div class="verbatim-wrap"><pre class="screen">&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para|</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;|&lt;/para&gt;</pre></div>
        </td><td>closes the current tag and puts the cursor between the
         opening and ending tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">&gt;&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para|</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;
    |
&lt;/para&gt;</pre></div>
        </td><td>closes the current tag, inserts newline between the tags,
         and puts the cursor on the blank line</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">;;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">para|</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;|&lt;/para&gt;</pre></div>
        </td><td>makes a pair of tags out of the preceding word,
         and puts the cursor between them</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">;;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">para|
</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;
    |
&lt;/para&gt;</pre></div>
        </td><td>when the word is on its own line, makes a pair of tags out
         of the preceding word, inserts newline between the tags,
         and puts the cursor on the blank line</td></tr></tbody></table>
    </div>
   </div>
   <div class="sect3 " id="id1828"><div class="titlepage"><div><div><h4 class="title" id="id1828"><span class="number">3.2.2.2 </span><span class="name">'[' and ']' Mappings for the Command Mode</span> <a title="Permalink" class="permalink" href="#id1828">#</a></h4></div></div></div>
    
    <div id="id1840" class="admonition tip"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6>
     <p>
      Some of the following mappings use &lt;localleader&gt; key before the
      mapping itself. It is backslash '<code class="literal">\</code>' by default. You
      can, however, change it to any other key in your <code class="filename">~/.vimrc</code> file. For
      example to change it to a comma '<code class="literal">,</code>', insert the
      following line
     </p>
<div class="verbatim-wrap"><pre class="screen">let maplocalleader = ","</pre></div>
     <p>
      and run <code class="command">:source ~/.vimrc</code> to make it effective.
     </p>
     <p>
      From now on, I assume you have re-mapped the &lt;localleader&gt; to a
      comma character <code class="literal">,</code> :-)
     </p>
    </div>
    <div class="informaltable">
     <table class="informaltable" border="1"><colgroup><col width=".5in" class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /></colgroup><thead><tr><th>mapping</th><th>when</th><th>result</th><th>description</th></tr></thead><tbody><tr><td>
<div class="verbatim-wrap"><pre class="screen">,]</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;!-- some commented | text --&gt;</pre></div>
        </td><td>the same text no longer commented|</td><td>removes &lt;!-- --&gt; delimiters and puts the cursor at the end of the text</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,}</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;!-- some commented | text --&gt;</pre></div>
        </td><td>|</td><td>removes the whole &lt;!-- --&gt; section</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">[[</pre></div>
        </td><td colspan="3" align="center">go to the previous opening tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">]]</pre></div>
        </td><td colspan="3" align="center">go to the next opening tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">[]</pre></div>
        </td><td colspan="3" align="center">go to the previous closing tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">][</pre></div>
        </td><td colspan="3" align="center">go to the next closing tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">["</pre></div>
        </td><td colspan="3" align="center">go to the next comment</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">]"</pre></div>
        </td><td colspan="3" align="center">go to the previous comment</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,5</pre></div>
         <p>
          or
         </p>
<div class="verbatim-wrap"><pre class="screen">,%</pre></div>
        </td><td colspan="3" align="center">jump to the beginning of the matching opening/closing tag</td></tr></tbody></table>
    </div>
   </div>
   <div class="sect3 " id="id1829"><div class="titlepage"><div><div><h4 class="title" id="id1829"><span class="number">3.2.2.3 </span><span class="name">Advanced Editing Techniques</span> <a title="Permalink" class="permalink" href="#id1829">#</a></h4></div></div></div>
    
    <div class="informaltable">
     <table class="informaltable" border="1"><colgroup><col width=".5in" class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /></colgroup><thead><tr><th>mapping</th><th>when</th><th>result</th><th>description</th></tr></thead><tbody><tr><td>
<div class="verbatim-wrap"><pre class="screen">,c</pre></div>
        </td><td colspan="3" align="center">rename a tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,C</pre></div>
        </td><td colspan="3" align="center">rename a tag and ask for its attributes</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,d</pre></div>
        </td><td>&lt;pa|ra&gt;outer &lt;emphasis&gt;inner&lt;/emphasis&gt; outer&lt;para&gt;</td><td>outer &lt;emphasis&gt;inner&lt;/emphasis&gt; outer</td><td>removes the surrounding tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,D</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;outer
&lt;em|phasis&gt;inner&lt;/emphasis&gt;
outer&lt;para&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;
outer outer
&lt;para&gt;</pre></div>
        </td><td>removes the surrounding tag and its content</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,e</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;some text|</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;some text&lt;para&gt;</pre></div>
        </td><td>provides a closing tag for the preceding unclosed opening tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,s</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">|some text&lt;/para&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;some text&lt;para&gt;</pre></div>
        </td><td>provides an opening tag for the following unopened closing tag</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,f</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;pa|ra&gt;
 line1
 line2
 line3
 &lt;/para&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">+-- 5 lines: &lt;para&gt;---------- </pre></div>
        </td><td>folds the tag under the cursor</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,F</pre></div>
        </td><td colspan="3" align="center">folds all tags named as the one under the cursor; if there 
        is no tag under the cursor, you will be asked for the tag name</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,j</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;para1&lt;/p|ara&gt;
&lt;para&gt;para2&lt;/para&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;para1|
para2&lt;/para&gt;</pre></div>
        </td><td>joins two adjacent elements of the same type, joining and removing the tag under the cursor</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,l</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">text</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;listitem&gt;
 &lt;para&gt;text&lt;/para&gt;
&lt;listitem&gt;</pre></div>
        </td><td>surrounds a visually defined (with <code class="literal">v</code>) block with &lt;listitem&gt;&lt;para&gt;</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,o</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;pa|ra&gt;text&lt;/para&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;
&lt;entry&gt;text&lt;/entry&gt;
&lt;/para&gt;</pre></div>
        </td><td>surround the inner text of the current tag with a specified one which you are asked for,
         &lt;entry/&gt; in the example</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,O</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;pa|ra&gt;text&lt;/para&gt;</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;entry&gt;
 &lt;para&gt;text&lt;/para&gt;
&lt;/entry&gt;</pre></div>
        </td><td>surrounds the tag under the cursor with a specified one which you are asked for,
         &lt;entry/&gt; in the example</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,&gt;</pre></div>
        </td><td colspan="3" align="center">indents the current element and all its content</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,&lt;</pre></div>
        </td><td colspan="3" align="center">unindents the current element and all its content</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,&lt;</pre></div>
        </td><td>some text|</td><td>&lt;!-- some text --&gt;</td><td>comments out visually selected text block</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,v</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">some text</pre></div>
        </td><td>
<div class="verbatim-wrap"><pre class="screen">&lt;para&gt;
 some text
&lt;/para&gt;</pre></div>
        </td><td>surrounds the visually selected text block  with a tag which you are asked for,
         &lt;para/&gt; in the example</td></tr><tr><td>
<div class="verbatim-wrap"><pre class="screen">,5</pre></div>
         <p>
          or
         </p>
<div class="verbatim-wrap"><pre class="screen">,%</pre></div>
        </td><td colspan="3" align="center">extends the visual selection up to the matching tag</td></tr></tbody></table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1 " id="id1832"><div class="titlepage"><div><div><h2 class="title" id="id1832"><span class="number">3.3 </span><span class="name">DTD Support</span> <a title="Permalink" class="permalink" href="#id1832">#</a></h2></div></div></div>
  

  <p>
   Vim can help you autocomplete tags based on the supplied DTD. First you
   have to obtain the DTD definition file for the XML subset (such as
   DocBook) you want to use, the convert it to Vim compatible format, and
   the let Vim know which file to load.
  </p>

  <div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>
     Download the
     <a class="ulink" href="http://search.cpan.org/CPAN/authors/id/E/EH/EHOOD/perlSGML.1997Sep18.tar.gz" target="_blank">perlSGML<span class="ulink-url"> (http://search.cpan.org/CPAN/authors/id/E/EH/EHOOD/perlSGML.1997Sep18.tar.gz)</span></a>
     package, <code class="command">unzip</code> it, <code class="command">cd</code> to the
     unpacked directory (<code class="filename">perlSGML.1997Sep18/</code>, run
     <code class="command">perl install.me</code>, and answer to the questions.
    </p>
   </li><li class="step ">
    <p>
     Download the DTD file you want to use with Vim. For example, DocBook5
     DTD can be found at
     <a class="ulink" href="http://docbook.org/xml/5.0/dtd/docbook.dtd" target="_blank">http://docbook.org/xml/5.0/dtd/docbook.dtd</a>.
    </p>
   </li><li class="step ">
    <p>
     Download
     <a class="ulink" href="/http://www.vim.org/scripts/download_script.php?src_id=5612" target="_blank">dtd2vim<span class="ulink-url"> (/http://www.vim.org/scripts/download_script.php?src_id=5612)</span></a>
     and run <code class="command">perl dtd2vim docbook.dtd docbook5</code>. The
     script creates the <code class="filename">docbook5.vim</code> file.
    </p>
   </li><li class="step ">
    <p>
     Move <code class="filename">docbook5.vim</code> to
     <code class="filename">~/.vim/autoload/xml/docbook5.vim</code>.
    </p>
   </li><li class="step ">
    <p>
     Restart Vim and open some DocBook file. To tell Vim to use the
     previously converted <code class="filename">docbook5.vim</code> file, set
     <code class="command">:XMLns docbook5</code> from within the Vim command mode.
    </p>
   </li><li class="step ">
    <p>
     To have Vim autocomplete the tag for you, start typing it with the
     opening sharp bracket <code class="literal">&lt;</code> - you can optionally add
     a few initial characters to make the suggestion list smaller - and then
     press the default omni-completion shortcut
     <span class="guimenu ">CTRL</span> › <span class="guimenu ">x</span> › <span class="guimenu ">CTRL</span> › <span class="guimenu ">o</span>. Vim offers
     you a list of possible choices. Select one and press
     <code class="literal">&gt;</code> to finish the tag.
    </p>
    <div id="id1841" class="admonition tip"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6>
     <p>
      Because <span class="guimenu ">CTRL</span> › <span class="guimenu ">x</span> › <span class="guimenu ">CTRL</span> › <span class="guimenu ">o</span> is awkward, I
      suggest you to remap it in your <code class="filename">~/.vimrc</code> to for example
      <span class="guimenu ">CTRL</span> › <span class="guimenu ">SPACE</span>
      adding the following lines for XML and DocBook file types:
     </p>
<div class="verbatim-wrap"><pre class="screen">autocmd FileType xml,docbk imap &lt;C-@&gt; &lt;C-X&gt;&lt;C-O&gt;</pre></div>
     <p>
      Then restart Vim and enjoy your wild editing experience :-)
     </p>
    </div>
   </li></ol></div></div>
 </div>
 <div class="sect1 " id="id1833"><div class="titlepage"><div><div><h2 class="title" id="id1833"><span class="number">3.4 </span><span class="name">Auto-completing XML Entities</span> <a title="Permalink" class="permalink" href="#id1833">#</a></h2></div></div></div>
  

  <p>
   If your XML entities are included in the file you are just editing, Vim
   can auto-complete their names for you - just write the
   initial<code class="literal">&amp;</code> and press the omni-completion shortcut
   (<span class="guimenu ">CTRL</span> › <span class="guimenu ">SPACE</span>
   if you followed me recently).
  </p>

  <p>
   If XML entities are included from other file, Vim cannot see it. You
   have to convert the entity file into <code class="literal">.vim</code> format and
   include it into the <code class="literal">vimxmlentities</code> option in the
   current Vim DTD file, such as
   <code class="filename">~/.vim/autoload/xml/docbook5.vim</code>.
  </p>

  <p>
   To ease this process, I included the
   <code class="command">update_docbook_entities.pl</code> script. It takes your
   custom entity file as a first argument, and the DTD .vim file as a second
   argument. It extracts found entities, converts them into Vim
   understandable format, and adds them into the custom DTD file, such as
   <code class="filename">docbook5.vim</code>.
  </p>

  <p>
   To add a shortcut to this script to Vim, add (and customized) this line
   to your <code class="filename">~/.vimrc</code> file:
  </p>

<div class="verbatim-wrap"><pre class="screen">nnoremap &lt;silent&gt; _e :!update_docbook_entities.pl xml/entity-decl.ent ~/.vim/autoload/xml/docbook5.vim&lt;CR&gt;&lt;CR&gt;</pre></div>

  <p>
   This line ensures—assuming that you moved
   <code class="command">update_docbook_entities.pl</code> to $PATH—that after
   pressing _e, the entities found in the
   <code class="filename">xml/entity-decl.ent</code> file will be added to
   <code class="filename">~/.vim/autoload/xml/docbook5.vim</code>.
  </p>
 </div>
 <div class="sect1 " id="id1837"><div class="titlepage"><div><div><h2 class="title" id="id1837"><span class="number">3.5 </span><span class="name">On-the-fly Spell-Checking</span> <a title="Permalink" class="permalink" href="#id1837">#</a></h2></div></div></div>
  

  <p>
   Vim has a built-in spell checker since version 7. To activate it on the
   current file, enter
  </p>

<div class="verbatim-wrap"><pre class="screen">:set spell spelllang=en</pre></div>

  <p>
   on the Vim command line, or put it in your <code class="filename">~/.vimrc</code> file:
  </p>

<div class="verbatim-wrap"><pre class="screen">autocmd FileType xml,docbk set spell spelllang=en</pre></div>

  <div class="sect2 " id="id1834"><div class="titlepage"><div><div><h3 class="title" id="id1834"><span class="number">3.5.1 </span><span class="name">Highlight Content, Not the Markup</span> <a title="Permalink" class="permalink" href="#id1834">#</a></h3></div></div></div>
   
   <p>
    The problem is that it highlights misspelled words included in XML tags
    instead of their content. To make Vim highlight spelling errors in the
    text, enter
   </p>
<div class="verbatim-wrap"><pre class="screen">:syntax spell toplevel</pre></div>
   <p>
    To make <code class="command">:syntax spell toplevel</code> start automatically at
    Vim start, create the <code class="filename">~/.vim/after/syntax/xml.vim</code>
    file and add the following line:
   </p>
<div class="verbatim-wrap"><pre class="screen">syntax spell toplevel</pre></div>
  </div>

  <div class="sect2 " id="id1835"><div class="titlepage"><div><div><h3 class="title" id="id1835"><span class="number">3.5.2 </span><span class="name">Highlighting Style and Colors</span> <a title="Permalink" class="permalink" href="#id1835">#</a></h3></div></div></div>
   
   <p>
    By default, Vim uses the whole cursor block to mark misspelled words.
    To make it underline them only, and color them with red, enter
   </p>
<div class="verbatim-wrap"><pre class="screen">:highlight SpellBad cterm=underline ctermfg=red ctermbg=none</pre></div>
  </div>

  <div class="sect2 " id="id1836"><div class="titlepage"><div><div><h3 class="title" id="id1836"><span class="number">3.5.3 </span><span class="name">Import Foreign Vocabulary</span> <a title="Permalink" class="permalink" href="#id1836">#</a></h3></div></div></div>
   
   <p>
    Vim uses its own language related spell checker dictionary. This
    section helps you use your own custom dictionary (originally an Aspell
    format) and turn it into Vim spelling wordlist.
   </p>
   <div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
     <p>
      Get a custom list of words, each word on a separate line. For Aspell
      dictionary <code class="filename">suse_aspell.rws</code> residing in the
      <code class="filename">/usr/share/daps/lib</code> directory, use the following
      command:
     </p>
<div class="verbatim-wrap"><pre class="screen">aspell dump master -l suse_aspell.rws --dict-dir=/usr/share/daps/lib &gt; ~/.vim/spell/suse.utf-8.add</pre></div>
     <p>
      The wordlist will be saved to
      <code class="filename">.vim/spell/suse.utf-8.add</code> in your home directory.
     </p>
    </li><li class="step ">
     <p>
      Convert the new wordlist into the Vim compatible format.
     </p>
<div class="verbatim-wrap"><pre class="screen">:mkspell! ~/.vim/spell/suse.utf-8.add</pre></div>
    </li><li class="step ">
     <p>
      Specify the new dictionary for use with Vim.
     </p>
<div class="verbatim-wrap"><pre class="screen">:set spellfile=~/.vim/spell/suse.utf-8.add</pre></div>
    </li></ol></div></div>
  </div>
 </div>
 <div class="sect1 " id="id1838"><div class="titlepage"><div><div><h2 class="title" id="id1838"><span class="number">3.6 </span><span class="name">DocBook Snippet Macros</span> <a title="Permalink" class="permalink" href="#id1838">#</a></h2></div></div></div>
  

  <p>
   In DocBook, many markup structures repeat very often over the text. To
   have shortcuts for inserting frequently inserted snippets is very
   convenient and saves a lot of writing time.
  </p>

  <p>
   That is why I introduced a separate configuration file
   <code class="filename">docbk_tpl.vim</code> that contains the macros for frequent
   DocBook snippets. Just place it in the <code class="filename">/templates</code>
   subdirectory and insert the following line in <code class="filename">~/.vimrc</code>:
  </p>

<div class="verbatim-wrap"><pre class="screen">" load docbook templates
autocmd FileType xml,docbk source ~/.vim/templates/docbk_tpl.vim</pre></div>
 </div>
</div>
</div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2016 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>